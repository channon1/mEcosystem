<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>mecosystem</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
    padding-top: 50px;
    padding-bottom: 20px;
    }
  </style>
  <!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<script>window.html5 || document.write('<script src="js/vendor/html5shiv.js"><\/script>')</script>
  <![endif]-->
  </head>
<body>
  <div class="container">
    <div class="jumbotron">
      <h1>Smart Measuring Cup</h1>
  </div>
    <div class="row" id="status">
      <div class="col-md-12">
	<h3>Connecting...</h3>
      </div>
    </div>
    <div class="row" id="main">
      <div class="col-md-2">
	<label>Volume:</label>
	<h3>
	  <span id="data">0</span> <span id="symbol">ml</span>
	</h3>
      </div>
      <div class="col-md-2">
	<label for="units">Units:</label>
	<select class="form-control" id="units">
	</select>
      </div>
      <div class="col-md-4">
	<label>Actions:</label>
	<div class="row">
	  <div class="col-md-6">
	    <button type="button" class="btn btn-default btn-block" id="tare">Tare</button>
	  </div>
	  <div class="col-md-6">
	    <button type="button" class="btn btn-default btn-block" id="clear">Clear</button>
	  </div>
	</div>
      </div>
    </div>
  </div>
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  
  <script>
    $(document).ready(function() {
    function updateData(data) {
    $('#data').text(value);
    }
    
    function setStatus(status) {
    if (status) {
    // Update status text and show the state area.
    $('#status h3').text(status);
    $('#status').show();
    }
    else {
    // Hide status area if null/empty status.
    $('#status').hide();
    }
    }
    // Start with main controls hidden until connected.
    $('#main').hide();
    
    
    var server = new EventSource('/data');
    server.onmessage = function(e) {
    updataData(e.data);
    };
    server.onopen = function(e) {
    // Hide connecting status and show controls.
    $('#status').hide();
    $('#main').show();
    };
    server.onerror = function(e) {
    // Hide controls and show connecting status.
    $('#main').hide();
    $('#status h3').text('Connecting...');
    $('#status').show();
    };
    
    });
  </script>
</body>
</html>
